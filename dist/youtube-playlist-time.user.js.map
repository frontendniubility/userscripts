{"version":3,"file":"youtube-playlist-time.user.js","mappings":"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","sources":["webpack://userscripts/./src/youtube-playlist-time/youtube-playlist-time.user.js"],"sourcesContent":["// ==UserScript==\r\n// @name         YouTube Playlist Time\r\n// @namespace    http://www.fuzetsu.com/WLFT\r\n// @version      1.2.11\r\n// @description  Shows the total time it would take to watch all the videos in a YouTube playlist\r\n// @match        https://www.youtube.com/*\r\n// @require      https://greasyfork.org/scripts/5679-wait-for-elements/code/Wait%20For%20Elements.js?version=147465\r\n// @copyright    2014+, fuzetsu\r\n// @grant        none\r\n// ==/UserScript==\r\n\r\nvar SCRIPT_NAME = 'YouTube Playlist Time';\r\nvar HOLDER_SELECTOR = '#stats';\r\nvar TIMESTAMP_SELECTOR = 'ytd-browse:not([hidden]) .ytd-thumbnail-overlay-time-status-renderer';\r\nvar EL_ID = 'us-total-time';\r\nvar EL_TYPE = 'yt-formatted-string';\r\nvar EL_CLASS = 'style-scope ytd-playlist-sidebar-primary-info-renderer';\r\n\r\nvar util = {\r\n  log: function () {\r\n    var args = [].slice.call(arguments);\r\n    args.unshift('%c' + SCRIPT_NAME + ':', 'font-weight: bold;color: #233c7b;');\r\n    console.log.apply(console, args);\r\n  },\r\n  q: function(query, context) {\r\n    return (context || document).querySelector(query);\r\n  },\r\n  qq: function(query, context) {\r\n    return [].slice.call((context || document).querySelectorAll(query));\r\n  },\r\n  bindEvt: function(target, events) {\r\n    events.forEach(function(evt) {\r\n      target.addEventListener(evt[0], evt[1]);\r\n    });\r\n  },\r\n  unbindEvt: function(target, events) {\r\n    events.forEach(function(evt) {\r\n      target.removeEventListener(evt[0], evt[1]);\r\n    });\r\n  },\r\n  throttle: function(callback, limit) {\r\n    var wait = false;\r\n    return function() {\r\n      if (!wait) {\r\n        callback.apply(this, arguments);\r\n        wait = true;\r\n        setTimeout(function() {\r\n          wait = false;\r\n        }, limit);\r\n      }\r\n    };\r\n  }\r\n};\r\n\r\n// converts a timestring to seconds\r\nvar calcTimeString = function(str) {\r\n  return str.split(':').reverse().reduce(function(last, cur, idx) {\r\n    cur = parseInt(cur, 10);\r\n    switch(idx) {\r\n      case 0: // seconds\r\n        return last + cur;\r\n      case 1: // minutes\r\n        return last + cur * 60;\r\n      case 2: // hours\r\n        return last + cur * 60 * 60;\r\n      default:\r\n        return 0;\r\n    }\r\n  }, 0);\r\n};\r\n\r\n// pads an integer with zeroes\r\nvar padTime = function(time) {\r\n  return (\"0\" + time).slice(-2);\r\n};\r\n\r\n// calculates the total amount of time necessary to watch all the videos in the playlist and outputs the result\r\nvar setTime = function(seconds) {\r\n  var loc = getTimeLoc();\r\n  var hours = Math.floor(seconds / 60 / 60);\r\n  seconds = seconds % (60 * 60);\r\n  var minutes = Math.floor(seconds / 60);\r\n  seconds = seconds % 60;\r\n  loc.innerHTML = (((hours || '') && hours + ' hours ') + ((minutes || '') && minutes + ' minutes ') + ((seconds || '') && seconds + ' seconds')).trim();\r\n};\r\n\r\nvar getTimeLoc = function() {\r\n  var loc = util.q('#' + EL_ID);\r\n  if(!loc) {\r\n    loc = util.q(HOLDER_SELECTOR).appendChild(document.createElement(EL_TYPE));\r\n    loc.id = EL_ID;\r\n    loc.className = EL_CLASS;\r\n  }\r\n  return loc;\r\n};\r\n\r\nvar timeLocExists = function() {\r\n  return !!util.q('#' + EL_ID);\r\n};\r\n\r\nvar lastLength = 0;\r\nvar calcTotalTime = function(force) {\r\n  var timestamps = util.qq(TIMESTAMP_SELECTOR);\r\n  if(!force && timestamps.length === lastLength && timeLocExists()) return;\r\n  lastLength = timestamps.length;\r\n  var totalSeconds = timestamps.reduce(function(total, ts) {\r\n    return total + calcTimeString(ts.textContent.trim());\r\n  }, 0);\r\n  setTime(totalSeconds);\r\n};\r\n\r\nvar events = [\r\n  ['mousemove', util.throttle(calcTotalTime.bind(null, false), 500)]\r\n];\r\n\r\nutil.log('Started, waiting for playlist');\r\n\r\nwaitForUrl(/^https:\\/\\/www\\.youtube\\.com\\/playlist\\?list=.+/, function() {\r\n  var playlistUrl = location.href;\r\n  var urlWaitId, oid;\r\n  var seconds = 0;\r\n  util.log('Reached playlist, waiting for display area to load');\r\n  waitForElems({\r\n    sel: HOLDER_SELECTOR,\r\n    stop: true,\r\n    onmatch: function(holder) {\r\n      clearTimeout(oid);\r\n      util.log('display area loaded, calculating time.');\r\n      oid = setTimeout(function() {\r\n        util.bindEvt(window, events);\r\n        calcTotalTime(true);\r\n         urlWaitId = waitForUrl(function(url) {\r\n           return url !== playlistUrl;\r\n         }, function() {\r\n           util.log('Leaving playlist, removing listeners');\r\n           util.unbindEvt(window, events);\r\n           var loc = getTimeLoc();\r\n           if(loc) loc.remove();\r\n         }, true);\r\n      }, 500);\r\n    }\r\n  });\r\n});\r\n"],"names":["SCRIPT_NAME","HOLDER_SELECTOR","TIMESTAMP_SELECTOR","EL_ID","EL_TYPE","EL_CLASS","util","log","args","slice","call","arguments","unshift","console","apply","q","query","context","document","querySelector","qq","querySelectorAll","bindEvt","target","events","forEach","evt","addEventListener","unbindEvt","removeEventListener","throttle","callback","limit","wait","setTimeout","calcTimeString","str","split","reverse","reduce","last","cur","idx","parseInt","padTime","time","setTime","seconds","loc","getTimeLoc","hours","Math","floor","minutes","innerHTML","trim","appendChild","createElement","id","className","timeLocExists","lastLength","calcTotalTime","force","timestamps","length","totalSeconds","total","ts","textContent","bind","waitForUrl","playlistUrl","location","href","urlWaitId","oid","waitForElems","sel","stop","onmatch","holder","clearTimeout","window","url","remove"],"sourceRoot":""}