{"version":3,"file":"hummingbird-compatibility-hover.user.js","mappings":"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","sources":["webpack://userscripts/./src/hummingbird-compatibility-hover/hummingbird-compatibility-hover.user.js"],"sourcesContent":["// ==UserScript==\r\n// @name         Hummingbird Compatibility Hover\r\n// @namespace    http://fuzetsu.com/hch\r\n// @version      1.0.4\r\n// @description  Shows hummingbird user compatibility rating at the bottom right of the screen when a user link is hovered over\r\n// @author       fuzetsu\r\n// @match        *://hummingbird.me/*\r\n// @match        *://forums.hummingbird.me/*\r\n// @grant        none\r\n// @require      https://greasyfork.org/scripts/5679-wait-for-elements/code/Wait%20For%20Elements.js?1\r\n// @deprecated   true\r\n// ==/UserScript==\r\n\r\nvar SCRIPT_NAME = 'Hummingbird Compatibility Hover';\r\nvar COMPAT_ID = 'hb-compat-area';\r\nvar LOAD_GIF = 'https://i.imgur.com/gX1lY9z.gif';\r\nvar DELAY_SEC = 0.75;\r\nvar CACHED = {};\r\n\r\nvar Util = {\r\n  log: function() {\r\n    var args = [].slice.call(arguments);\r\n    args.unshift('%c' + SCRIPT_NAME + ':', 'font-weight: bold;color: #233c7b;');\r\n    console.log.apply(console, args);\r\n  },\r\n  q: function(query, context) {\r\n    return (context || document).querySelector(query);\r\n  },\r\n  qq: function(query, context) {\r\n    return [].slice.call((context || document).querySelectorAll(query));\r\n  },\r\n  getJSON: function(url, load, error) {\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.open('get', url);\r\n    xhr.responseType = 'json';\r\n    xhr.onload = function() {\r\n      load(xhr.response);\r\n    };\r\n    xhr.onerror = error;\r\n    xhr.send();\r\n  },\r\n  _style: document.head.appendChild(document.createElement('style')),\r\n  addStyle: function(styles) {\r\n    var sel, css, obj;\r\n    var out = '';\r\n    for (sel in styles) {\r\n      obj = styles[sel];\r\n      out += sel + '{';\r\n      for (css in obj) {\r\n        out += css + ':' + obj[css] + ';';\r\n      }\r\n      out += '}';\r\n    }\r\n    this._style.textContent += out;\r\n  }\r\n};\r\n\r\nvar hb = {\r\n  getUserName: function(url) {\r\n    return url.match(/\\/users\\/([a-z0-9_]+)/i)[1];\r\n  }\r\n};\r\n\r\nvar App = {\r\n  userLinkRegex: /^https?:\\/\\/(forums\\.)?hummingbird\\.me\\/users\\/[^\\/]+\\/?(\\?.*)?$/,\r\n\r\n  styleUI: function() {\r\n    var style = {\r\n      '.hb-visible': {\r\n        'visibility': 'visible',\r\n        'opacity': 1,\r\n        'transition': 'opacity .5s linear'\r\n      },\r\n      '.hb-hidden': {\r\n        'visibility': 'hidden',\r\n        'opacity': 0,\r\n        'transition': 'visibility 0s .5s, opacity .5s linear'\r\n      },\r\n      '.hb-compat-percent': {\r\n        'font-size': '32px',\r\n        'font-weight': 'bold',\r\n        'margin': '5px 10px 10px 10px'\r\n      },\r\n      '.hb-compat-header': {\r\n        'font-size': '24px',\r\n        'margin': '20px 10px 10px 10px'\r\n      }\r\n    };\r\n    var id = '#' + COMPAT_ID;\r\n    style[id] = {\r\n      'font-family': '\"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif',\r\n      'position': 'fixed',\r\n      'background': 'white',\r\n      'text-align': 'center',\r\n      'box-shadow': '0px 0px 15px 0px rgba(0,0,0,0.75)',\r\n      'border-top-left-radius': '5px',\r\n      'max-width': '90%',\r\n      'bottom': '0',\r\n      'right': '0',\r\n      'z-index': '10000',\r\n      'line-height': '32px'\r\n    };\r\n    style[id + ' img'] = {\r\n      'margin': '20px 50px 20px 50px'\r\n    };\r\n    Util.addStyle(style);\r\n  },\r\n\r\n  getCompatArea: function() {\r\n    var compatArea = Util.q('#' + COMPAT_ID);\r\n\r\n    if (!compatArea) {\r\n      compatArea = document.createElement('div');\r\n      compatArea.id = COMPAT_ID;\r\n      compatArea.style.display = 'none';\r\n      document.body.appendChild(compatArea);\r\n    }\r\n\r\n    return compatArea;\r\n  },\r\n\r\n  getCompatHTML: function(compat) {\r\n    return '<h3 class=\"hb-compat-header\">Compatibility is ' + compat.phrase + '</h3><div class=\"hb-compat-percent\" style=\"color: ' + compat.color + '\">' + compat.percent + '</div>';\r\n  },\r\n\r\n  showCompat: function(me, them) {\r\n    if (me === them) return;\r\n    if (Util.q('.signup-cta')) return; // not signed in\r\n\r\n    var self = this;\r\n    var area = this.getCompatArea();\r\n\r\n    var cache = CACHED[me + '+' + them];\r\n    if (cache) {\r\n      area.innerHTML = self.getCompatHTML(cache);\r\n    } else {\r\n      area.innerHTML = '<img src=\"' + LOAD_GIF + '\" />';\r\n      Util.getJSON('https://hbird-cmp-node.herokuapp.com/compatibility/anime?user1=' + me + '&user2=' + them, function(compat) {\r\n        CACHED[me + '+' + them] = compat;\r\n        area.innerHTML = self.getCompatHTML(compat);\r\n      });\r\n    }\r\n    area.style.display = '';\r\n    setTimeout(function() {\r\n      area.className = 'hb-visible';\r\n    }, 0);\r\n  },\r\n\r\n  hideCompat: function() {\r\n    var area = this.getCompatArea();\r\n    area.className = 'hb-hidden';\r\n    setTimeout(function() {\r\n      area.style.display = 'none';\r\n    }, 500);\r\n  },\r\n\r\n  _timeout: null,\r\n  startHover: function(e) {\r\n    App._timeout = setTimeout(function() {\r\n      App._timeout = null;\r\n      App.showCompat(hb.getUserName(Util.q('.dropdown-menu > li > a, #current-user > a').href), hb.getUserName(e.target.href));\r\n    }, DELAY_SEC * 1000);\r\n  },\r\n  stopHover: function(e) {\r\n    clearInterval(App._timeout);\r\n    App.hideCompat();\r\n  },\r\n\r\n  start: function() {\r\n    var self = this;\r\n    Util.log('starting...');\r\n    self.styleUI();\r\n    waitForElems('a', function(link) {\r\n      if (self.userLinkRegex.test(link.href)) {\r\n        link.addEventListener('mouseenter', self.startHover);\r\n        link.addEventListener('mouseleave', self.stopHover);\r\n        link.addEventListener('click', self.stopHover);\r\n      }\r\n    });\r\n  }\r\n\r\n};\r\n\r\nApp.start();\r\n"],"names":["SCRIPT_NAME","COMPAT_ID","LOAD_GIF","DELAY_SEC","CACHED","Util","log","args","slice","call","arguments","unshift","console","apply","q","query","context","document","querySelector","qq","querySelectorAll","getJSON","url","load","error","xhr","XMLHttpRequest","open","responseType","onload","response","onerror","send","_style","head","appendChild","createElement","addStyle","styles","sel","css","obj","out","textContent","hb","getUserName","match","App","userLinkRegex","styleUI","style","id","getCompatArea","compatArea","display","body","getCompatHTML","compat","phrase","color","percent","showCompat","me","them","self","area","cache","innerHTML","setTimeout","className","hideCompat","_timeout","startHover","e","href","target","stopHover","clearInterval","start","waitForElems","link","test","addEventListener"],"sourceRoot":""}