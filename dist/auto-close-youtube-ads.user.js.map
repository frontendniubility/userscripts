{"version":3,"file":"auto-close-youtube-ads.user.js","mappings":"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","sources":["webpack://userscripts/./src/auto-close-youtube-ads/auto-close-youtube-ads.user.js"],"sourcesContent":["// ==UserScript==\r\n// @name         Auto Close YouTube Ads\r\n// @namespace    http://fuzetsu.acypa.com\r\n// @version      1.4.1\r\n// @description  Close and/or Mute YouTube ads automatically!\r\n// @author       fuzetsu\r\n// @match        *://*.youtube.com/*\r\n// @exclude      *://*.youtube.com/subscribe_embed?*\r\n// @grant        GM_getValue\r\n// @grant        GM_setValue\r\n// @grant        GM_deleteValue\r\n// @grant        GM_registerMenuCommand\r\n// @require      https://gitcdn.xyz/repo/fuzetsu/userscripts/b38eabf72c20fa3cf7da84ecd2cefe0d4a2116be/wait-for-elements/wait-for-elements.js\r\n// @require      https://gitcdn.xyz/repo/kufii/My-UserScripts/fa4555701cf5a22eae44f06d9848df6966788fa8/libs/gm_config.js\r\n// ==/UserScript==\r\n\r\n/**\r\n * This section of the code holds the css selectors that point different parts of YouTube's\r\n * user interface. If the script ever breaks and you don't want to wait for me to fix it\r\n * chances are that it can be fixed by just updating these selectors here.\r\n */\r\nconst CSS = {\r\n\t// the button used to skip an ad\r\n\tskipButton: \".videoAdUiSkipButton,.ytp-ad-skip-button\",\r\n\t// the area showing the countdown to the skip button showing\r\n\tpreSkipButton: \".videoAdUiPreSkipButton,.ytp-ad-preview-container\",\r\n\t// little x that closes banner ads\r\n\tcloseBannerAd: \".close-padding.contains-svg,a.close-button,.ytp-ad-overlay-close-button\",\r\n\t// button that toggle mute on the video\r\n\tmuteButton: \".ytp-mute-button\",\r\n\t// the slider bar handle that represents the current volume\r\n\tmuteIndicator: \".ytp-volume-slider-handle\",\r\n\t// container for ad on video\r\n\tadArea: \".videoAdUi,.ytp-ad-player-overlay\",\r\n\t// container that shows ad length eg 3:23\r\n\tadLength: \".videoAdUiAttribution,.ytp-ad-duration-remaining\",\r\n\t// container for header ad on the home page\r\n\thomeAdContainer: \"#masthead-ad\",\r\n};\r\n\r\nconst util = {\r\n\tlog: (...args) => console.log(`%c${SCRIPT_NAME}:`, \"font-weight: bold;color: purple;\", ...args),\r\n\tclearTicks: (ticks) => {\r\n\t\tticks.forEach((tick) => (!tick ? null : typeof tick === \"number\" ? clearInterval(tick) : tick.stop()));\r\n\t\tticks.length = 0;\r\n\t},\r\n\tkeepTrying: (wait, action) => {\r\n\t\tconst tick = setInterval(() => action() && clearInterval(tick), wait);\r\n\t\treturn tick;\r\n\t},\r\n\tstoreGet: (key) => {\r\n\t\tif (typeof GM_getValue === \"undefined\") {\r\n\t\t\tconst value = localStorage.getItem(key);\r\n\t\t\treturn value === \"true\" ? true : value === \"false\" ? false : value;\r\n\t\t}\r\n\t\treturn GM_getValue(key);\r\n\t},\r\n\tstoreSet: (key, value) => (typeof GM_setValue === \"undefined\" ? localStorage.setItem(key, value) : GM_setValue(key, value)),\r\n\tstoreDel: (key) => (typeof GM_deleteValue === \"undefined\" ? localStorage.removeItem(key) : GM_deleteValue(key)),\r\n\tq: (query, context) => (context || document).querySelector(query),\r\n\tqq: (query, context) => Array.from((context || document).querySelectorAll(query)),\r\n\tget: (obj, str) => util.getPath(obj, str.split(\".\").reverse()),\r\n\tgetPath: (obj, path) => (obj == null ? null : path.length > 0 ? util.getPath(obj[path.pop()], path) : obj),\r\n};\r\n\r\nconst SCRIPT_NAME = \"Auto Close YouTube Ads\";\r\nconst SHORT_AD_MSG_LENGTH = 12000;\r\nconst TICKS = [];\r\nlet DONT_SKIP = false;\r\n\r\nconst config = GM_config([\r\n\t{\r\n\t\tkey: \"muteAd\",\r\n\t\tlabel: \"Mute ads?\",\r\n\t\ttype: \"bool\",\r\n\t\tdefault: true,\r\n\t},\r\n\t{\r\n\t\tkey: \"hideAd\",\r\n\t\tlabel: \"Hide video ads?\",\r\n\t\ttype: \"bool\",\r\n\t\tdefault: false,\r\n\t},\r\n\t{\r\n\t\tkey: \"secWaitBanner\",\r\n\t\tlabel: \"Banner ad close delay (seconds)\",\r\n\t\ttype: \"number\",\r\n\t\tdefault: 3,\r\n\t\tmin: 0,\r\n\t},\r\n\t{\r\n\t\tkey: \"secWaitVideo\",\r\n\t\tlabel: \"Video ad skip delay (seconds)\",\r\n\t\ttype: \"number\",\r\n\t\tdefault: 3,\r\n\t\tmin: 0,\r\n\t},\r\n\t{\r\n\t\tkey: \"minAdLengthForSkip\",\r\n\t\tlabel: \"Dont skip video shorter than this (seconds)\",\r\n\t\ttype: \"number\",\r\n\t\tdefault: 0,\r\n\t\tmin: 0,\r\n\t},\r\n\t{\r\n\t\tkey: \"muteEvenIfNotSkipping\",\r\n\t\tlabel: \"Mute video even if not skipping\",\r\n\t\ttype: \"bool\",\r\n\t\tdefault: true,\r\n\t},\r\n\t{\r\n\t\tkey: \"debug\",\r\n\t\tlabel: \"Show extra debug information.\",\r\n\t\ttype: \"bool\",\r\n\t\tdefault: false,\r\n\t},\r\n\t{\r\n\t\tkey: \"version\",\r\n\t\ttype: \"hidden\",\r\n\t\tdefault: 1,\r\n\t},\r\n]);\r\n\r\nconst configVersion = 2;\r\nlet conf = config.load();\r\n\r\nconfig.onsave = (cfg) => (conf = cfg);\r\n\r\n// config upgrade procedure\r\nfunction upgradeConfig() {\r\n\tlet lastVersion;\r\n\twhile (conf.version < configVersion && lastVersion !== conf.version) {\r\n\t\tutil.log(\"upgrading config version, current = \", conf.version, \", target = \", configVersion);\r\n\t\tlastVersion = conf.version;\r\n\t\tswitch (conf.version) {\r\n\t\t\tcase 1: {\r\n\t\t\t\tconst oldConf = {\r\n\t\t\t\t\tmuteAd: util.storeGet(\"MUTE_AD\"),\r\n\t\t\t\t\thideAd: util.storeGet(\"HIDE_AD\"),\r\n\t\t\t\t\tsecWait: util.storeGet(\"SEC_WAIT\"),\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (oldConf.muteAd != null) conf.muteAd = !!oldConf.muteAd;\r\n\t\t\t\tif (oldConf.hideAd != null) conf.hideAd = !!oldConf.hideAd;\r\n\t\t\t\tif (oldConf.secWait != null && !isNaN(oldConf.secWait)) conf.secWaitBanner = conf.secWaitVideo = parseInt(oldConf.secWait);\r\n\r\n\t\t\t\tconf.version = 2;\r\n\r\n\t\t\t\tconfig.save(conf);\r\n\t\t\t\t[\"SEC_WAIT\", \"HIDE_AD\", \"MUTE_AD\"].forEach(util.storeDel);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nupgradeConfig();\r\n\r\nfunction createMessageElement() {\r\n\tconst elem = document.createElement(\"div\");\r\n\telem.setAttribute(\"style\", \"border: 1px solid white;border-right: none;background: rgb(0,0,0,0.75);color:white;position: absolute;right: 0;z-index: 1000;top: 10px;padding: 10px;padding-right: 20px;cursor: pointer;pointer-events: all;\");\r\n\treturn elem;\r\n}\r\nfunction showMessage(container, text, ms) {\r\n\tconst message = createMessageElement();\r\n\tmessage.textContent = text;\r\n\tcontainer.appendChild(message);\r\n\tutil.log(`showing message [${ms}ms]: ${text}`);\r\n\tsetTimeout(() => message.remove(), ms);\r\n}\r\n\r\nfunction setupCancelDiv(ad) {\r\n\tconst skipArea = util.q(CSS.preSkipButton, ad);\r\n\tconst skipText = skipArea && skipArea.textContent.trim().replace(/\\s+/g, \" \");\r\n\tif (skipText && ![\"will begin\", \"will play\"].some((snip) => skipText.includes(snip))) {\r\n\t\tconst cancelClass = \"acya-cancel-skip\";\r\n\t\tlet cancelDiv = util.q(\".\" + cancelClass);\r\n\t\tif (cancelDiv) cancelDiv.remove();\r\n\t\tcancelDiv = createMessageElement();\r\n\t\tcancelDiv.className = cancelClass;\r\n\t\tcancelDiv.textContent = (conf.muteAd ? \"Un-mute & \" : \"\") + \"Cancel Auto Skip\";\r\n\t\tcancelDiv.onclick = () => {\r\n\t\t\tutil.log(\"cancel clicked\");\r\n\t\t\tDONT_SKIP = true;\r\n\t\t\tcancelDiv.remove();\r\n\t\t\tconst muteButton = getMuteButton();\r\n\t\t\tconst muteIndicator = getMuteIndicator();\r\n\t\t\tif (conf.muteAd && muteButton && muteIndicator && isMuted(muteIndicator)) muteButton.click();\r\n\t\t};\r\n\t\tad.appendChild(cancelDiv);\r\n\t} else {\r\n\t\tutil.log(\"skip button area wasn't there for some reason.. couldn't place cancel button.\");\r\n\t}\r\n}\r\n\r\nfunction parseTime(str) {\r\n\tconst [minutes, seconds] = str\r\n\t\t.split(\" \")\r\n\t\t.pop()\r\n\t\t.split(\":\")\r\n\t\t.map((num) => parseInt(num));\r\n\tutil.log(str, minutes, seconds);\r\n\treturn minutes * 60 + seconds || 0;\r\n}\r\n\r\nconst getMuteButton = () => util.q(CSS.muteButton);\r\nconst getMuteIndicator = () => util.q(CSS.muteIndicator);\r\nconst isMuted = (m) => m.style.left === \"0px\";\r\n\r\nfunction getAdLength(ad) {\r\n\tif (!ad) return 0;\r\n\tconst time = ad.querySelector(CSS.adLength);\r\n\treturn time ? parseTime(time.textContent) : 0;\r\n}\r\n\r\nfunction waitForAds() {\r\n\tDONT_SKIP = false;\r\n\tTICKS.push(\r\n\t\twaitForElems({\r\n\t\t\tsel: CSS.skipButton,\r\n\t\t\tonmatch: (btn) => {\r\n\t\t\t\tutil.log(\"found skip button\");\r\n\t\t\t\tutil.keepTrying(500, () => {\r\n\t\t\t\t\tif (!btn) return true;\r\n\t\t\t\t\t// if not visible\r\n\t\t\t\t\tif (btn.offsetParent === null) return;\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tif (DONT_SKIP) {\r\n\t\t\t\t\t\t\tutil.log(\"not skipping...\");\r\n\t\t\t\t\t\t\tDONT_SKIP = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tutil.log(\"clicking skip button\");\r\n\t\t\t\t\t\tbtn.click();\r\n\t\t\t\t\t}, conf.secWaitVideo * 1000);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t}),\r\n\t\twaitAndClick(CSS.closeBannerAd, conf.secWaitBanner * 1000),\r\n\t\twaitForElems({\r\n\t\t\tsel: CSS.adArea,\r\n\t\t\tonmatch: (ad) => {\r\n\t\t\t\t// reset don't skip\r\n\t\t\t\tDONT_SKIP = false;\r\n\t\t\t\tconst adLength = getAdLength(ad);\r\n\t\t\t\tconst isShort = adLength < conf.minAdLengthForSkip;\r\n\t\t\t\tconst debug = () => (conf.debug ? `[DEBUG adLength = ${adLength}, minAdLengthForSkip = ${conf.minAdLengthForSkip}]` : \"\");\r\n\t\t\t\tif (isShort && !conf.muteEvenIfNotSkipping) {\r\n\t\t\t\t\tDONT_SKIP = true;\r\n\t\t\t\t\treturn showMessage(ad, `Shot AD detected, will not skip or mute. ${debug()}`, SHORT_AD_MSG_LENGTH);\r\n\t\t\t\t}\r\n\t\t\t\tif (conf.hideAd) {\r\n\t\t\t\t\tad.style.zIndex = 10;\r\n\t\t\t\t\tad.style.background = \"black\";\r\n\t\t\t\t}\r\n\t\t\t\t// show option to cancel automatic skip\r\n\t\t\t\tif (!isShort) setupCancelDiv(ad);\r\n\t\t\t\tif (!conf.muteAd) return;\r\n\t\t\t\tconst muteButton = getMuteButton();\r\n\t\t\t\tconst muteIndicator = getMuteIndicator();\r\n\t\t\t\tif (!muteIndicator) return util.log(\"unable to determine mute state, skipping mute\");\r\n\t\t\t\tmuteButton.click();\r\n\t\t\t\tutil.log(\"Video ad detected, muting audio\");\r\n\t\t\t\t// wait for the ad to disappear before unmuting\r\n\t\t\t\tutil.keepTrying(250, () => {\r\n\t\t\t\t\tif (!util.q(CSS.adArea)) {\r\n\t\t\t\t\t\tif (isMuted(muteIndicator)) {\r\n\t\t\t\t\t\t\tmuteButton.click();\r\n\t\t\t\t\t\t\tutil.log(\"Video ad ended, unmuting audio\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tutil.log(\"Video ad ended, audio already unmuted\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (isShort) {\r\n\t\t\t\t\tDONT_SKIP = true;\r\n\t\t\t\t\treturn showMessage(ad, `Short AD detected, will not skip but will mute. ${debug()}`, SHORT_AD_MSG_LENGTH);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}),\r\n\t);\r\n}\r\n\r\nconst waitAndClick = (sel, ms, cb) =>\r\n\twaitForElems({\r\n\t\tsel: sel,\r\n\t\tonmatch: (btn) => {\r\n\t\t\tutil.log(\"Found ad, closing in\", ms, \"ms\");\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tbtn.click();\r\n\t\t\t\tif (cb) cb(btn);\r\n\t\t\t}, ms);\r\n\t\t},\r\n\t});\r\n\r\nutil.log(\"Started\");\r\n\r\nif (window.self === window.top) {\r\n\tlet videoUrl;\r\n\t// close home ad whenever encountered\r\n\twaitForElems({ sel: CSS.homeAdContainer, onmatch: (ad) => ad.remove() });\r\n\t// wait for video page\r\n\twaitForUrl(/^https:\\/\\/www\\.youtube\\.com\\/watch\\?.*v=.+/, () => {\r\n\t\tif (videoUrl && location.href !== videoUrl) {\r\n\t\t\tutil.log(\"Changed video, removing old wait\");\r\n\t\t\tutil.clearTicks(TICKS);\r\n\t\t}\r\n\t\tvideoUrl = location.href;\r\n\t\tutil.log(\"Entered video, waiting for ads\");\r\n\t\twaitForAds();\r\n\t\tTICKS.push(\r\n\t\t\twaitForUrl(\r\n\t\t\t\t(url) => url !== videoUrl,\r\n\t\t\t\t() => {\r\n\t\t\t\t\tvideoUrl = null;\r\n\t\t\t\t\tutil.clearTicks(TICKS);\r\n\t\t\t\t\tutil.log(\"Left video, stopped waiting for ads\");\r\n\t\t\t\t},\r\n\t\t\t\ttrue,\r\n\t\t\t),\r\n\t\t);\r\n\t});\r\n} else {\r\n\tif (/^https:\\/\\/www\\.youtube\\.com\\/embed\\//.test(location.href)) {\r\n\t\tutil.log(\"Found embedded video, waiting for ads\");\r\n\t\twaitForAds();\r\n\t}\r\n}\r\n\r\nGM_registerMenuCommand(\"Auto Close Youtube Ads - Manage Settings\", config.setup);\r\n"],"names":["CSS","skipButton","preSkipButton","closeBannerAd","muteButton","muteIndicator","adArea","adLength","homeAdContainer","util","log","_console","_len","arguments","length","args","Array","_key","console","apply","concat","SCRIPT_NAME","clearTicks","ticks","forEach","tick","clearInterval","stop","keepTrying","wait","action","setInterval","storeGet","key","GM_getValue","value","localStorage","getItem","storeSet","GM_setValue","setItem","storeDel","GM_deleteValue","removeItem","q","query","context","document","querySelector","qq","from","querySelectorAll","get","obj","str","getPath","split","reverse","path","pop","SHORT_AD_MSG_LENGTH","TICKS","DONT_SKIP","config","GM_config","label","type","min","configVersion","conf","load","onsave","cfg","upgradeConfig","lastVersion","version","oldConf","muteAd","hideAd","secWait","isNaN","secWaitBanner","secWaitVideo","parseInt","save","createMessageElement","elem","createElement","setAttribute","showMessage","container","text","ms","message","textContent","appendChild","setTimeout","remove","setupCancelDiv","ad","skipArea","skipText","trim","replace","some","snip","includes","cancelClass","cancelDiv","className","onclick","getMuteButton","getMuteIndicator","isMuted","click","parseTime","_str$split$pop$split$","map","num","_str$split$pop$split$2","_slicedToArray","minutes","seconds","m","style","left","getAdLength","time","waitForAds","push","waitForElems","sel","onmatch","btn","offsetParent","waitAndClick","isShort","minAdLengthForSkip","debug","muteEvenIfNotSkipping","zIndex","background","cb","window","self","top","videoUrl","waitForUrl","location","href","url","test","GM_registerMenuCommand","setup"],"sourceRoot":""}